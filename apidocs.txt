Docs

GET
/allrooms

Params: none

Returns: JSON Map:
buildings:
    array of:
        name: <name of building>
        rooms:
            array of:
                name: <name of room>
                id: <id of room>
                address: <address of room>
                seats: <num seats in room>
                building: <name of building>
                current: <current occurrence in room>
                chatRoomId: <id of chat room, chat room websocket location can be queried with /room/<id>>

GET
/searchrooms

Params:
    q: string query

Returns: JSON Map:
query: <your query>
rooms:
    array of:
        name: <name of room>
        id: <id of room>
        address: <address of room>
        seats: <num seats in room>
        building: <name of building>
        current: <current occurrence in room>
        chatRoomId: <id of chat room, chat room websocket location can be queried with /room/<id>>

WEBSOCKET


    Websocket URL: Exactly the same as HTTP URL, same port
WebSocket messages format is JSON

WebSocket messages are tables, they always contain a parameter "type" to distinguish the message type
There are WebSocket messages that you can send and ones that the server sends to you.
We'll start with the ones that you can send.

MESSAGES THAT YOU CAN SEND

    LOGIN MESSAGE

"type": "login"

Send when you want to login to a room.

    Params

"room": # ID of the room that you're trying to login to (you should get that from the /allrooms or /searchrooms query (String)
"user_id_secret": # TODO: YOUR STATIC USER ID SECRET FOR FRIEND SYSTEM
"username": # Your desired username (String)

    Example
{
    "type": "login",
    "room": "abc123",
    "username": "Supergrobi"
}

    CHAT MESSAGE

Send when you are logged in to a room, and want to send a text message.

"type": "message"

    Params

"message": # The message you want to send (String)
// TODO Maybe images or stickers?

MESSAGES THAT CAN BE SENT TO YOU


    ERROR MESSAGE

"type": "error"

Sent when there's an error.

    Params

"reason": # Human-readable message of what happened (String)


    CHAT MESSAGE

"type": "message"

Sent when someone wrote something.

    Params

"username": # Username of the author
"user-id" // TODO: STATIC USER ID OF THE AUTHOR FOR FRIEND SYSTEM
"message": # The message (String)
"time": # The time (in millis of day) of the message
// TODO Maybe images or stickers?


    LOGIN INFO MESSAGE

"type": "info-login"

Sent when someone logged into your room

    Params

"username": # Username of the person that logged in
"user-id" // TODO: STATIC USER ID OF THIS PERSON FOR FRIEND SYSTEM


    LOGOUT INFO MESSAGE

"type": "info-logout"

Sent when someone logged out of your room

    Params

"username": # Username of the person that logged out
"user-id" // TODO: STATIC USER ID OF THIS PERSON FOR FRIEND SYSTEM


